<!DOCTYPE html>
<html lang="en">
<!-- Basic1 -->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<!-- Mobile Metas -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="viewport" content="initial-scale=1, maximum-scale=1">
<!-- Site Metas -->
<title>ODDB - Ocular Diseases Databa</title>
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="author" content="">
<!-- Site Icons -->
<link rel="shortcut icon" href="images/fevicon.ico.png" type="image/x-icon" />
<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
<!-- Bootstrap CSS -->
<link rel="stylesheet" href="css/bootstrap.min.css">
<!-- Site CSS -->
<link rel="stylesheet" href="style.css">
<!-- Colors CSS -->
<link rel="stylesheet" href="css/colors.css">
<!-- ALL VERSION CSS -->
<link rel="stylesheet" href="css/versions.css">
<!-- Responsive CSS -->
<link rel="stylesheet" href="css/responsive.css">
<!-- Custom CSS -->
<link rel="stylesheet" href="css/custom.css">
<!-- Modernizer for Portfolio -->
<script src="js/modernizer.js"></script>
<!-- [if lt IE 9] -->
<style>
   table {
      border-collapse: collapse;
      width: 80%;
   }

   th,
   td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: left;
   }

   td {
      color: #999;
   }

   th {
      background: #fff;
      color: #157fda
   }
</style>
</head>


<body class="clinic_version">
   <!-- LOADER -->
   <!--<div id="preloader">
      <img class="preloader" src="images/loaders/heart-loading2.gif" alt="">
   </div>-->
   <!-- END LOADER -->
   <header>
      <div class="header-top wow fadeIn">
         <div class="container">
            <div class="row align-items-center">
               <!-- Logo -->
               <div class="col-md-4">
                  <a class="navbar-brand" href="index.html">
                     <img src="images/logoo.png" alt="image" style="width:100px;margin-top:-10px">
                  </a>
               </div>

               <!-- Navigation with custom class for padding adjustments -->
               <div class="col-md-8 text-right custom-nav">
                  <div id="navbar" class="navbar-collapse collapse">
                     <ul class="nav navbar-nav d-flex justify-content-end">
                        <li><a class="active nav-li" href="index.html">Home</a></li>
                        <li><a class="nav-li" data-scroll href="about_us.html">About us</a></li>
                        <li><a class="nav-li" data-scroll href="#Tutorial">Tutorial</a></li>
                        <!-- Dropdown Start -->
                        <li class="dropdown">
                           <a class="nav-li dropdown-toggle">Analysis</a>
                           <ul class="dropdown-menu">
                              <li><a href="Drug-based-stat.html">Drug based analysis</a></li>
                              <li><a href="Gene-based-stat.html">Gene based analysis</a></li>
                              <li><a href="MOI-stat.html">Inheritance based analysis</a></li>
                              <li><a href="Variant-based-stat.html">Variant based analysis</a></li>
                           </ul>
                        </li>
                        <!-- Dropdown End -->
                        <li class="dropdown">
                           <a class="nav-li dropdown-toggle">Statistic</a>
                           <ul class="dropdown-menu">
                              <li><a href="Drug.html">Drug based statistic</a></li>
                              <li><a href="Gene.html">Gene based statistic</a></li>
                              <li><a href="Inheritance.html">Inheritance based statistic</a></li>
                              <li><a href="Variant.html">Variant based statistic</a></li>
                           </ul>
                        </li>
                        <!-- Dropdown End -->
                        <li><a class="nav-li" data-scroll href="download.html">Download</a></li>
                        <li><a class="nav-li" data-scroll href="contact_us.html">Contact Us</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </header>

   <div id="home" class="parallax first-section wow fadeIn" data-stellar-background-ratio="0.1"
      style="background-image:url('images/slider-bg1.jpg');margin-top: 0px;">
      <div class="container">
         <div class="row">
            <div class="col-md-12 col-sm-12">
               <div class="text-contant">
                  <h2>
                     <span class="center"><span class="icon"><img src="images/icon-logo1.jpg" alt="#" /></span></span>
                     <a href="" class="typewrite" data-period="2000"
                        data-type='[ "Welcome to ODDB", "Ocular Diseases Database" ]'>
                        <span class="wrap"></span>
                     </a>
                  </h2>
               </div>
            </div>
         </div>
         <!-- end row -->
      </div>
      <!-- end container -->
   </div>
   <!-- end section -->



   <div id="about" class="section wow fadeIn">
      <div class="container">
         <div class="heading">
            <span class="icon-logo"><img src="images/icon-logo1.jpg" alt="#"></span>
            <h2>Expolre ODDB</h2>
         </div>
         <!-- end title -->
         <div class="row">
            <div class="col-md-6">
               <div class="message-box">
                  <h4>ODDB</h4>
                  <h2>Ocular Diseases Database</h2>
                  <p class="lead">The Ocular Diseases Database (ODDB) is a comprehensive resource specifically designed
                     to support research and clinical studies in the field of ophthalmology. It encompasses a vast array
                     of data pertaining to various eye conditions, including diagnostic images, patient demographics,
                     clinical outcomes, and treatment efficacy..</p>
                  <p> The database serves as a valuable tool for medical professionals and researchers, facilitating the
                     development of advanced diagnostic techniques and the evaluation of therapeutic interventions. With
                     its robust data sets and detailed case studies, ODDB enhances understanding of ocular diseases and
                     fosters innovation in eye care practices, ultimately aiming to improve patient outcomes through
                     data-driven insights. </p>
                  <a href="#services" data-scroll class="btn btn-light btn-radius btn-brd grd1 effect-1">Learn More</a>
               </div>
               <!-- end messagebox -->
            </div>
            <!-- end col -->


            <footer id="footer" class="footer-area wow fadeIn">
               <div class="container">
                  <div class="row">
                     <div class="col-md-4">
                        <div class="logo padding">
                           <a href=""><img src="images/logo1.png" alt=""></a>
                           <p>A database for Ocular Diseases.</p>
                        </div>
                     </div>
                     <div class="col-md-4">
                        <div class="footer-info padding">
                           <h3>CONTACT US</h3>
                           <p><i class="fa fa-map-marker" aria-hidden="true"></i> UEF, Kuopio, Finland</p>
                           <p><i class="fa fa-paper-plane" aria-hidden="true"></i> u.seemab@gmail.com</p>
                           <p><i class="fa fa-phone" aria-hidden="true"></i> (+358) 123 456</p>
                        </div>
                     </div>
                     <div class="col-md-4">
                        <div id="statsContainer">
                           <h1 style="text-align:left;font-weight:600;">
                              Visitors count: <span id="visitorCount">0</span>
                           </h1>

                           <div style="max-height:128px; overflow-y:auto; border:1px solid #ccc;">
                              <table border="1" cellspacing="0" cellpadding="8"
                                 style="width:100%; text-align:center; border-collapse:collapse;">
                                 <tbody id="statsTable"></tbody>
                              </table>
                           </div>
                        </div>

                        <script type="module">
                           import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
                           import {
                              getFirestore,
                              collection,
                              addDoc,
                              getDocs,
                              query,
                              where
                           } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

                           const firebaseConfig = {
                              apiKey: "AIzaSyA5VIAFJB1buNlmwNbbxyEpJmQdlVH5_84",
                              authDomain: "daring-acumen-427809-i1.firebaseapp.com",
                              projectId: "daring-acumen-427809-i1",
                              storageBucket: "daring-acumen-427809-i1.firebasestorage.app",
                              messagingSenderId: "390763490659",
                              appId: "1:390763490659:web:6bb73c6ed513927cf03756",
                              measurementId: "G-XYH6N9K123"
                           };

                           const app = initializeApp(firebaseConfig);
                           const db = getFirestore(app);

                           async function logVisitor() {
                              try {
                                 const res = await fetch("https://get.geojs.io/v1/ip/geo.json");
                                 const data = await res.json();

                                 const ip = data.ip || "Unknown IP";

                                 let location = "Unknown Location";
                                 if (data.city && data.country) {
                                    location = `${data.city}, ${data.country}`;
                                 } else if (data.country) {
                                    location = data.country;
                                 } else if (data.organization_name) {
                                    location = data.organization_name;
                                 }

                                 const now = new Date();

                                 const visitDate = now.toLocaleDateString("en-US", {
                                    timeZone: "America/New_York"
                                 });

                                 const visitorsRef = collection(db, "visitors");
                                 const q = query(visitorsRef, where("ip", "==", ip), where("date", "==", visitDate));
                                 const existing = await getDocs(q);

                                 if (!existing.empty) {
                                    console.log("IP already visited today, skipping add:", ip);
                                    renderTable();
                                    return;
                                 }

                                 await addDoc(visitorsRef, {
                                    ip,
                                    location,
                                    date: visitDate,
                                    time: now.toLocaleString("en-US", {
                                       timeZone: "America/New_York",
                                       year: "numeric",
                                       month: "2-digit",
                                       day: "2-digit",
                                       hour: "2-digit",
                                       minute: "2-digit",
                                       second: "2-digit",
                                       hour12: false
                                    })
                                 });

                                 console.log("Visitor saved to Firebase!");
                                 renderTable();
                              } catch (err) {
                                 console.error("Error logging visitor:", err);
                              }
                           }

                           async function renderTable() {
                              const tbody = document.getElementById("statsTable");
                              const visitorCount = document.getElementById("visitorCount");

                              tbody.innerHTML = `<tr><td colspan="2">Loading...</td></tr>`;

                              try {
                                 const snapshot = await getDocs(collection(db, "visitors"));
                                 let logs = snapshot.docs.map(doc => doc.data());

                                 // 🔹 Convert string "time" → Date object, then sort
                                 logs.sort((a, b) => {
                                    const dateA = new Date(a.time);
                                    const dateB = new Date(b.time);
                                    return dateB - dateA; // newest first
                                 });

                                 visitorCount.textContent = logs.length;
                                 tbody.innerHTML = "";

                                 if (!logs.length) {
                                    tbody.innerHTML = `<tr><td colspan="2">No visitors logged yet</td></tr>`;
                                    return;
                                 }

                                 // Show latest 15 visitors
                                 logs.slice(0, 15).forEach(log => {
                                    const tr = document.createElement("tr");
                                    tr.innerHTML = `<td>${log.location}</td><td>${log.time}</td>`;
                                    tbody.appendChild(tr);
                                 });
                              } catch (err) {
                                 tbody.innerHTML = `<tr><td colspan="2">Error loading logs: ${err.message}</td></tr>`;
                              }
                           }

                           document.addEventListener("DOMContentLoaded", logVisitor);
                        </script>
                     </div>
                  </div>
               </div>
            </footer>
            <div class="copyright-area wow fadeIn">
               <div class="container">
                  <div class="row">
                     <div class="col-md-8">
                        <div class="footer-text">
                           <p>© LRL Group. All Rights Reserved.</p>
                        </div>
                     </div>
                     <div class="col-md-4">
                        <div class="social">
                           <ul class="social-links">
                              <li><a href=""><i class="fa fa-rss"></i></a></li>
                              <li><a href=""><i class="fa fa-facebook"></i></a></li>
                              <li><a href=""><i class="fa fa-twitter"></i></a></li>
                              <li><a href=""><i class="fa fa-google-plus"></i></a></li>
                              <li><a href=""><i class="fa fa-youtube"></i></a></li>
                              <li><a href=""><i class="fa fa-pinterest"></i></a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <!-- end copyrights -->
            <a href="#home" data-scroll class="dmtop global-radius"><i class="fa fa-angle-up"></i></a>
            <!-- all js files -->
            <script src="js/all.js"></script>
            <!-- all plugins -->
            <script src="js/custom.js"></script>
            <!-- map -->
            <script
               src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCNUPWkb4Cjd7Wxo-T4uoUldFjoiUA1fJc&callback=myMap"></script>
</body>


</html>

