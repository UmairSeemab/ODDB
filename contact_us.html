<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="shortcut icon" href="images/fevicon.ico.png" type="image/x-icon" />
<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
<link rel="stylesheet" href="css/bootstrap.min.css">
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="css/colors.css">
<link rel="stylesheet" href="css/versions.css">
<link rel="stylesheet" href="css/responsive.css">
<link rel="stylesheet" href="css/custom.css">
<script src="js/modernizer.js"></script>

<style>
.download-section {
  margin-top: 120px;
  margin-bottom: 80px;
}
.download-section h2 {
  color: #157fda;
  font-weight: 600;
  text-align: center;
  margin-bottom: 30px;
}
.download-list {
  max-width: 800px;
  margin: 0 auto;
  background: #f8faff;
  border-radius: 10px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  padding: 30px;
}
.download-item {
  background: #fff;
  border: 1px solid #dce6f0;
  border-radius: 8px;
  margin-bottom: 15px;
  padding: 15px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.download-item span {
  color: #333;
  font-size: 16px;
}
.download-item a {
  background-color: #157fda;
  color: white;
  text-decoration: none;
  padding: 8px 16px;
  border-radius: 5px;
  font-weight: 500;
}
.download-item a:hover {
  background-color: #125fb5;
}
</style>
</head>

<body class="clinic_version">
<header>
   <div class="header-top wow fadeIn">
      <div class="container">
         <div class="row align-items-center">
            <div class="col-md-4">
               <a class="navbar-brand" href="index.html">
                  <img src="images/logoo.png" alt="image" style="width:100px;margin-top:-10px">
               </a>
            </div>
            <div class="col-md-8 text-right custom-nav">
               <div id="navbar" class="navbar-collapse collapse">
                  <ul class="nav navbar-nav d-flex justify-content-end">
                     <li><a class="nav-li" href="index.html">Home</a></li>
                     <li><a class="nav-li" href="about_us.html">About us</a></li>
                     <li><a class="nav-li" href="#Tutorial">Tutorial</a></li>
                     <li class="dropdown">
                        <a class="nav-li dropdown-toggle">Analysis</a>
                        <ul class="dropdown-menu">
                           <li><a href="Drug-based-stat.html">Drug based analysis</a></li>
                           <li><a href="Gene-based-stat.html">Gene based analysis</a></li>
                           <li><a href="MOI-stat.html">Inheritance based analysis</a></li>
                           <li><a href="Variant-based-stat.html">Variant based analysis</a></li>
                        </ul>
                     </li>
                     <li class="dropdown">
                        <a class="nav-li dropdown-toggle">Statistics</a>
                        <ul class="dropdown-menu">
                           <li><a href="Drug.html">Drug based statistics</a></li>
                           <li><a href="Gene.html">Gene based statistics</a></li>
                           <li><a href="Inheritance.html">Inheritance based statistics</a></li>
                           <li><a href="Variant.html">Variant based statistics</a></li>
                        </ul>
                     </li>
                     <li><a class="active nav-li" href="download.html">Download</a></li>
                     <li><a class="nav-li" href="contact_us.html">Contact Us</a></li>
                  </ul>
               </div>
            </div>
         </div>
      </div>
   </div>
</header>


<body class="clinic_version">
  <div class="container">
    <div class="contact-container">
      <h2 class="text-center" style="color:#157fda;">Contact Us</h2>
      <form id="contactForm">
        <input type="text" id="name" class="form-control" placeholder="Your Name" required>
        <input type="email" id="email" class="form-control" placeholder="Your Email" required>
        <textarea id="message" rows="5" class="form-control" placeholder="Your Message" required></textarea>

        <div class="form-check mb-3">
          <input class="form-check-input" type="checkbox" id="humanCheck">
          <label class="form-check-label" for="humanCheck">I am human</label>
        </div>

        <button type="submit" id="sendBtn" class="btn btn-primary btn-block" disabled>Send Message</button>
        <div id="successMsg">Message sent successfully.</div>
        <div id="errorMsg">Failed to send message. Try again later.</div>
      </form>
    </div>
  </div>

  <!-- Load EmailJS SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script>
    // Initialize EmailJS
    emailjs.init('eaZJ3m1RyS3HEHXXv'); // Replace with your EmailJS Public Key

    document.getElementById("humanCheck").addEventListener("change", function() {
      document.getElementById("sendBtn").disabled = !this.checked;
    });

    document.getElementById("contactForm").addEventListener("submit", function(e) {
      e.preventDefault();

      emailjs.send("service_jcz7wj8", "template_lz07abk", {
        from_name: document.getElementById("name").value,
        from_email: document.getElementById("email").value,
        message: document.getElementById("message").value
      }).then(() => {
        document.getElementById("successMsg").style.display = "block";
        document.getElementById("errorMsg").style.display = "none";
        e.target.reset();
        document.getElementById("sendBtn").disabled = true;
      }, (error) => {
        console.error("EmailJS Error:", error);
        document.getElementById("errorMsg").style.display = "block";
      });
    });
  </script>

  <!-- Footer -->
  <footer id="footer" class="footer-area wow fadeIn">
    <div class="container">
      <div class="row">
        <div class="col-md-4">
          <div class="logo padding">
            <a href=""><img src="images/logo1.png" alt=""></a>
            <p>A database for Ocular Diseases.</p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="footer-info padding">
            <h3>CONTACT US</h3>
            <p><i class="fa fa-map-marker" aria-hidden="true"></i> UEF, Kuopio, Finland</p>
            <p><i class="fa fa-paper-plane" aria-hidden="true"></i> u.seemab@gmail.com</p>
            <p><i class="fa fa-phone" aria-hidden="true"></i> (+358) 123 456</p>
          </div>
        </div>
        <div class="col-md-4">
          <div id="statsContainer">
            <h1 style="text-align:left;font-weight:600;">
              Visitors count: <span id="visitorCount">0</span>
            </h1>
            <div style="max-height:128px; overflow-y:auto; border:1px solid #ccc;">
              <table border="1" cellspacing="0" cellpadding="8"
                style="width:100%; text-align:center; border-collapse:collapse;">
                <tbody id="statsTable"></tbody>
              </table>
            </div>
          </div>

          <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
            import { getFirestore, collection, addDoc, getDocs, query, where } 
              from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

            const firebaseConfig = {
              apiKey: "AIzaSyA5VIAFJB1buNlmwNbbxyEpJmQdlVH5_84",
              authDomain: "daring-acumen-427809-i1.firebaseapp.com",
              projectId: "daring-acumen-427809-i1",
              storageBucket: "daring-acumen-427809-i1.firebasestorage.app",
              messagingSenderId: "390763490659",
              appId: "1:390763490659:web:6bb73c6ed513927cf03756",
              measurementId: "G-XYH6N9K123"
            };

            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);

            async function logVisitor() {
              try {
                const res = await fetch("https://get.geojs.io/v1/ip/geo.json");
                const data = await res.json();

                const ip = data.ip || "Unknown IP";
                let location = "Unknown Location";
                if (data.city && data.country) location = `${data.city}, ${data.country}`;
                else if (data.country) location = data.country;

                const now = new Date();
                const visitDate = now.toLocaleDateString("en-US", { timeZone: "Europe/Helsinki" });
                const visitorsRef = collection(db, "visitors");
                const q = query(visitorsRef, where("ip", "==", ip), where("date", "==", visitDate));
                const existing = await getDocs(q);

                if (!existing.empty) {
                  renderTable();
                  return;
                }

                await addDoc(visitorsRef, {
                  ip,
                  location,
                  date: visitDate,
                  time: now.toLocaleString("en-US", {
                    timeZone: "Europe/Helsinki",
                    year: "numeric",
                    month: "2-digit",
                    day: "2-digit",
                    hour: "2-digit",
                    minute: "2-digit",
                    second: "2-digit",
                    hour12: false
                  })
                });
                renderTable();
              } catch (err) {
                console.error("Error logging visitor:", err);
              }
            }

            async function renderTable() {
              const tbody = document.getElementById("statsTable");
              const visitorCount = document.getElementById("visitorCount");
              tbody.innerHTML = `<tr><td colspan="2">Loading...</td></tr>`;
              try {
                const snapshot = await getDocs(collection(db, "visitors"));
                let logs = snapshot.docs.map(doc => doc.data());
                logs.sort((a, b) => new Date(b.time) - new Date(a.time));
                visitorCount.textContent = logs.length;
                tbody.innerHTML = "";
                logs.slice(0, 15).forEach(log => {
                  const tr = document.createElement("tr");
                  tr.innerHTML = `<td>${log.location}</td><td>${log.time}</td>`;
                  tbody.appendChild(tr);
                });
              } catch (err) {
                tbody.innerHTML = `<tr><td colspan="2">Error loading logs: ${err.message}</td></tr>`;
              }
            }

            document.addEventListener("DOMContentLoaded", logVisitor);
          </script>
        </div>
      </div>
    </div>
  </footer>

  <div class="copyright-area wow fadeIn">
    <div class="container">
      <div class="row">
        <div class="col-md-8">
          <div class="footer-text">
            <p>© LRL Group. All Rights Reserved.</p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="social">
            <ul class="social-links">
              <li><a href=""><i class="fa fa-rss"></i></a></li>
              <li><a href=""><i class="fa fa-facebook"></i></a></li>
              <li><a href=""><i class="fa fa-twitter"></i></a></li>
              <li><a href=""><i class="fa fa-google-plus"></i></a></li>
              <li><a href=""><i class="fa fa-youtube"></i></a></li>
              <li><a href=""><i class="fa fa-pinterest"></i></a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <a href="#home" data-scroll class="dmtop global-radius"><i class="fa fa-angle-up"></i></a>

  <script src="js/all.js"></script>
  <script src="js/custom.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCNUPWkb4Cjd7Wxo-T4uoUldFjoiUA1fJc&callback=myMap"></script>
</body>
</html>
